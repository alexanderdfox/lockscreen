<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4-Spinner Glowing Grid Lock</title>
<style>
  body, html {
	height: 100%;
	margin: 0;
	background: #111;
	font-family: sans-serif;
	user-select: none;
	overflow: hidden;
	touch-action: none;
	display: flex;
	flex-direction: column;
	align-items: center;
  }

  /* Pure grid container, no circle border */
  .grid-container {
	position: relative;
	margin-top: 150px;
	width: 400px;
	height: 400px;
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	grid-template-rows: repeat(4, 1fr);
	gap: 4px;
  }

  .grid-container div {
	border: 2px solid rgba(0,255,255,0.3);
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 14px;
	color: #0ff;
	text-shadow: 0 0 6px #0ff;
	box-shadow: 0 0 12px rgba(0,255,255,0.4);
	border-radius: 6px;
  }

  .spinner {
	width: 70px;
	height: 70px;
	border-radius: 50%;
	position: absolute;
	cursor: grab;
	display: flex;
	justify-content: center;
	align-items: center;
	font-weight: bold;
	font-size: 18px;
	color: #fff;
	user-select: none;
	transform-origin: center;
	flex-direction: column;
	box-shadow: 0 0 12px #fff, 0 0 24px #0ff;
	border: 2px solid #0ff;
	transition: transform 0.1s;
  }

  .spinner .degrees {
	font-size: 14px;
	color: #0ff;
	margin-top: 6px;
	font-family: monospace;
	text-shadow: 0 0 6px #0ff;
  }

  .unlocked {
	position: absolute;
	top: 50px;
	font-size: 28px;
	color: #0f0;
	display: none;
	text-shadow: 0 0 12px #0f0, 0 0 24px #0f0;
  }

  button {
	margin-top: 40px;
	padding: 10px 20px;
	font-size: 18px;
	cursor: pointer;
	border: none;
	border-radius: 8px;
	background: #0af;
	color: #000;
	font-weight: bold;
	box-shadow: 0 0 12px #0af;
  }

  button:disabled {
	background: #444;
	cursor: not-allowed;
	box-shadow: none;
  }
</style>
</head>
<body>

<div class="grid-container" id="gridContainer">
  <!-- Grid cells -->
</div>

<div class="unlocked" id="unlocked">Unlocked!</div>

<div>
  <button id="lockBtn">Lock</button>
  <button id="unlockBtn" disabled>Unlock</button>
</div>

<script>
const gridContainer = document.getElementById('gridContainer');
const unlockedMsg = document.getElementById('unlocked');
const lockBtn = document.getElementById('lockBtn');
const unlockBtn = document.getElementById('unlockBtn');

const gridSize = 4;
const cellSize = gridContainer.clientWidth / gridSize;

let spinners = [];
let combination = null;

// Create grid cells
for(let y=0; y<gridSize; y++){
  for(let x=0; x<gridSize; x++){
	let cell = document.createElement('div');
	cell.textContent = `${x},${y}`;
	gridContainer.appendChild(cell);
  }
}

// Colors for spinners
const colors = ['#ff33cc', '#33ff77', '#33ccff', '#ffcc33'];

// Create 4 spinners above the grid
for(let i=0; i<4; i++){
  const spinner = document.createElement('div');
  spinner.className = 'spinner';
  spinner.style.background = `linear-gradient(135deg, ${colors[i]} 0%, #111 100%)`;
  spinner.innerHTML = `ðŸŒ€<div class="degrees">000Â°</div>`;
  document.body.appendChild(spinner);
  spinner.currentRotation = 0;
  spinner.velocity = 0;
  spinner.lastY = 0;
  spinner.dragging = false;
  spinners.push(spinner);

  // Start above the grid
  const gridRect = gridContainer.getBoundingClientRect();
  spinner.style.left = `${gridRect.left + i*90}px`;
  spinner.style.top = `${gridRect.top - 100}px`;
}

// Helper: get mouse/touch position
function getXY(e){
  if(e.touches) return {x: e.touches[0].clientX, y: e.touches[0].clientY};
  return {x: e.clientX, y: e.clientY};
}

let activeSpinner = null;

function startDrag(e){
  activeSpinner = e.currentTarget;
  const {x, y} = getXY(e);
  activeSpinner.dragging = true;
  activeSpinner.offsetX = x - activeSpinner.offsetLeft;
  activeSpinner.offsetY = y - activeSpinner.offsetTop;
  activeSpinner.lastY = y;
  activeSpinner.velocity = 0;
  activeSpinner.style.cursor = 'grabbing';
  e.preventDefault();
}

function moveDrag(e){
  if(!activeSpinner || !activeSpinner.dragging) return;
  const {x, y} = getXY(e);

  // Move anywhere
  let newX = x - activeSpinner.offsetX;
  let newY = y - activeSpinner.offsetY;
  activeSpinner.style.left = `${newX}px`;
  activeSpinner.style.top = `${newY}px`;

  // Rotation based on vertical drag
  let deltaY = y - activeSpinner.lastY;
  activeSpinner.currentRotation += deltaY;
  activeSpinner.velocity = deltaY;
  activeSpinner.style.transform = `rotate(${activeSpinner.currentRotation}deg)`;
  activeSpinner.querySelector('.degrees').textContent = `${('000'+Math.round(activeSpinner.currentRotation%360)).slice(-3)}Â°`;
  activeSpinner.lastY = y;
}

function endDrag(){
  if(activeSpinner) activeSpinner.dragging = false;
  if(activeSpinner) activeSpinner.style.cursor = 'grab';
  activeSpinner = null;
}

// Momentum
function animateMomentum(){
  spinners.forEach(spinner => {
	if(!spinner.dragging){
	  if(Math.abs(spinner.velocity) > 0.1){
		spinner.currentRotation += spinner.velocity;
		spinner.style.transform = `rotate(${spinner.currentRotation}deg)`;
		spinner.querySelector('.degrees').textContent = `${('000'+Math.round(spinner.currentRotation%360)).slice(-3)}Â°`;
		spinner.velocity *= 0.95;
	  } else spinner.velocity = 0;
	}
  });
  requestAnimationFrame(animateMomentum);
}
animateMomentum();

spinners.forEach(spinner=>{
  spinner.addEventListener('mousedown', startDrag);
  spinner.addEventListener('touchstart', startDrag, {passive:false});
});

document.addEventListener('mousemove', moveDrag);
document.addEventListener('touchmove', moveDrag, {passive:false});
document.addEventListener('mouseup', endDrag);
document.addEventListener('touchend', endDrag);

// Lock: only allow spinners in grid
lockBtn.addEventListener('click', ()=>{
  combination = [];
  let allInGrid = true;
  spinners.forEach(spinner=>{
	const rect = spinner.getBoundingClientRect();
	const x = rect.left + rect.width/2 - gridContainer.getBoundingClientRect().left;
	const y = rect.top + rect.height/2 - gridContainer.getBoundingClientRect().top;
	const gridX = Math.floor(x/cellSize);
	const gridY = Math.floor(y/cellSize);
	if(gridX<0 || gridX>=gridSize || gridY<0 || gridY>=gridSize){
	  allInGrid = false;
	}
	combination.push({x:gridX,y:gridY,rotation:Math.round(spinner.currentRotation%360)});
  });
  if(!allInGrid){
	alert('All spinners must be inside the grid to lock!');
	combination = null;
	return;
  }
  alert('Combination saved! Spinners returned above the grid.');
  const gridRect = gridContainer.getBoundingClientRect();
  spinners.forEach((spinner,i)=>{
	// Position above the grid
	spinner.style.left = `${gridRect.left + i*90}px`;
	spinner.style.top = `${gridRect.top - 100}px`;
	
	// Reset rotation
	spinner.currentRotation = 0;
	spinner.style.transform = `rotate(0deg)`;
	spinner.querySelector('.degrees').textContent = '000Â°';
  });
  unlockBtn.disabled = false;
  lockBtn.disabled = true;
});

// Unlock
unlockBtn.addEventListener('click', ()=>{
  if(!combination) return alert('No combination saved!');
  let allCorrect = true;
  spinners.forEach((spinner,i)=>{
	const rect = spinner.getBoundingClientRect();
	const x = rect.left + rect.width/2 - gridContainer.getBoundingClientRect().left;
	const y = rect.top + rect.height/2 - gridContainer.getBoundingClientRect().top;
	const gridX = Math.floor(x/cellSize);
	const gridY = Math.floor(y/cellSize);
	const rotation = Math.round(spinner.currentRotation%360);
	if(gridX!==combination[i].x || gridY!==combination[i].y || rotation!==combination[i].rotation){
	  allCorrect=false;
	}
  });
  if(allCorrect){
	unlockedMsg.style.display='block';
	setTimeout(()=>window.location.href='https://example.com',500);
  } else alert('Incorrect combination!');
});
</script>

</body>
</html>
